# 11. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

## SQLite (`sqlite3`)

### âœ… 1. ëª¨ë“ˆ ì„í¬íŠ¸ ë° ì—°ê²°

```
import sqlite3

conn = sqlite3.connect("example.db")  # íŒŒì¼ ê¸°ë°˜ DB
cursor = conn.cursor()
```

- ë©”ëª¨ë¦¬ ìƒ ì„ì‹œ DB: `sqlite3.connect(":memory:")`
- ì—°ê²° ê°ì²´ `conn`, ì»¤ì„œ ê°ì²´ `cursor` ë¥¼ í†µí•´ SQL ì‹¤í–‰

### ğŸ—ï¸ 2. í…Œì´ë¸” ìƒì„±

```
cursor.execute("""
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    age INTEGER
)
""")
```

- `AUTOINCREMENT`: ìë™ ì¦ê°€ ê¸°ë³¸í‚¤
- `IF NOT EXISTS`: ì´ë¯¸ ìˆì„ ê²½ìš° ìƒì„± ìƒëµ

### ğŸ“¥ 3. ë°ì´í„° ì‚½ì…

```
cursor.execute("INSERT INTO users (name, age) VALUES (?, ?)", ("Alice", 30))
cursor.execute("INSERT INTO users (name, age) VALUES (?, ?)", ("Bob", 25))
conn.commit()
```

- `?` í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ ê°’ ë°”ì¸ë”©
- `commit()` í˜¸ì¶œ ì‹œ ë³€ê²½ ë‚´ìš© ì €ì¥ë¨

### ğŸ“¤ 4. ë°ì´í„° ì¡°íšŒ

```
cursor.execute("SELECT * FROM users")
rows = cursor.fetchall()

for row in rows:
    print(row)
```

#### ë‹¨ì¼ í–‰ë§Œ ì¡°íšŒ

```
row = cursor.fetchone()
```

### âœï¸ 5. ë°ì´í„° ìˆ˜ì • ë° ì‚­ì œ

```
cursor.execute("UPDATE users SET age = ? WHERE name = ?", (35, "Alice"))
cursor.execute("DELETE FROM users WHERE name = ?", ("Bob",))
conn.commit()
```

### ğŸ§¾ 6. ë°˜ë³µ ë‹¤ì¤‘ ì‚½ì… (`executemany`)

```
data = [("Charlie", 22), ("Diana", 29)]
cursor.executemany("INSERT INTO users (name, age) VALUES (?, ?)", data)
conn.commit()
```

### ğŸ“‹ 7. SQL ê²°ê³¼ë¥¼ pandasë¡œ ë¶ˆëŸ¬ì˜¤ê¸°

```
import pandas as pd

df = pd.read_sql_query("SELECT * FROM users", conn)
```

- `pandas`ë¥¼ í†µí•´ í…Œì´ë¸” ì¡°íšŒ â†’ DataFrame í™œìš© ê°€ëŠ¥

### ğŸ§¼ 8. ì—°ê²° ì¢…ë£Œ

```
cursor.close()
conn.close()
```

### ğŸ”’ 9. íŠ¸ëœì­ì…˜ ì²˜ë¦¬

ê¸°ë³¸ì ìœ¼ë¡œ autocommit ëª¨ë“œëŠ” ë¹„í™œì„±í™”ë¨.
 ìˆ˜ë™ ì»¤ë°‹ì´ í•„ìš”í•˜ì§€ë§Œ, `with` ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ìë™ ì»¤ë°‹/ë¡¤ë°± ì²˜ë¦¬ ê°€ëŠ¥:

```
with sqlite3.connect("example.db") as conn:
    conn.execute("INSERT INTO users (name, age) VALUES (?, ?)", ("Eve", 28))
```

### ğŸ”§ 10. ê¸°íƒ€ ìœ ìš© ê¸°ëŠ¥

#### í…Œì´ë¸” ëª©ë¡ í™•ì¸

```
cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
```

#### ì—´ ì •ë³´ ì¡°íšŒ

```
cursor.execute("PRAGMA table_info(users)")
```

#### ì™¸ë˜ í‚¤ í™œì„±í™” (ê¸°ë³¸ ë¹„í™œì„±í™”ë¨)

```
cursor.execute("PRAGMA foreign_keys = ON")
```

### ğŸ“Œ ìš”ì•½

| ì‘ì—…           | ì˜ˆì‹œ                            |
| -------------- | ------------------------------- |
| DB ì—°ê²°        | `sqlite3.connect("dbfile.db")`  |
| í…Œì´ë¸” ìƒì„±    | `CREATE TABLE`                  |
| ë°ì´í„° ì‚½ì…    | `INSERT INTO ... VALUES (?, ?)` |
| ì¡°íšŒ           | `SELECT * FROM ...`             |
| ìˆ˜ì •           | `UPDATE ... SET ...`            |
| ì‚­ì œ           | `DELETE FROM ...`               |
| ë‹¤ì¤‘ ì‹¤í–‰      | `executemany()`                 |
| DataFrame ë³€í™˜ | `pd.read_sql_query()`           |
| ì—°ê²° ì¢…ë£Œ      | `conn.close()`                  |

SQLiteëŠ” ì†Œí˜• í”„ë¡œì íŠ¸, ë¡œì»¬ ë¶„ì„, ì•± ë‚´ì¥ ë°ì´í„°ë² ì´ìŠ¤ ë“±ì— ë§¤ìš° ìœ ìš©í•˜ë©°,
 `sqlite3` ëª¨ë“ˆì€ ì´ë¥¼ Python ì½”ë“œì—ì„œ **SQL ìˆ˜ì¤€ìœ¼ë¡œ ì™„ì „íˆ ì œì–´**í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

## MySQL / PostgreSQL ì—°ë™ (`pymysql`, `psycopg2`)

### ğŸ“¦ 1. ë“œë¼ì´ë²„ ì„¤ì¹˜

#### MySQLìš© (`pymysql`)

```
pip install pymysql
```

#### PostgreSQLìš© (`psycopg2`)

```
pip install psycopg2-binary
```

### ğŸ”— 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

#### ğŸ”¸ MySQL (`pymysql`)

```
import pymysql

conn = pymysql.connect(
    host="localhost",
    user="your_user",
    password="your_password",
    database="your_database",
    port=3306,
    charset="utf8mb4"
)
```

#### ğŸ”¸ PostgreSQL (`psycopg2`)

```
import psycopg2

conn = psycopg2.connect(
    host="localhost",
    user="your_user",
    password="your_password",
    dbname="your_database",
    port=5432
)
```

### ğŸ“‹ 3. ì»¤ì„œ ìƒì„± ë° SQL ì‹¤í–‰

```
cursor = conn.cursor()

cursor.execute("CREATE TABLE IF NOT EXISTS users (id SERIAL PRIMARY KEY, name TEXT, age INT)")
cursor.execute("INSERT INTO users (name, age) VALUES (%s, %s)", ("Alice", 30))

conn.commit()
```

- `MySQL`ì˜ ê²½ìš° `AUTO_INCREMENT`, `PostgreSQL`ì€ `SERIAL` ì‚¬ìš© ê°€ëŠ¥
- ê°’ ë°”ì¸ë”©ì€ ëª¨ë‘ `%s` (DB-API 2.0 ê·œì•½)

### ğŸ“¥ 4. ë°ì´í„° ì¡°íšŒ

```
cursor.execute("SELECT * FROM users")
rows = cursor.fetchall()

for row in rows:
    print(row)
```

- `fetchone()`: í•œ í–‰
- `fetchmany(n)`: nê°œ í–‰
- `fetchall()`: ì „ì²´

### ğŸ§¹ 5. ì—°ê²° ì¢…ë£Œ

```
cursor.close()
conn.close()
```

### ğŸ§° 6. pandasì™€ ì—°ê³„

```
import pandas as pd

query = "SELECT * FROM users"
df = pd.read_sql(query, conn)
```

> `pymysql`, `psycopg2` ëª¨ë‘ `pandas.read_sql()` ì— ì‚¬ìš© ê°€ëŠ¥

### ğŸ§¾ 7. ë‹¤ì¤‘ ë°ì´í„° ì‚½ì… (`executemany`)

```
data = [("Bob", 25), ("Charlie", 40)]
cursor.executemany("INSERT INTO users (name, age) VALUES (%s, %s)", data)
conn.commit()
```

### ğŸ§± 8. ì»¤ë„¥ì…˜ í’€ (ê³ ê¸‰)

- `psycopg2` â†’ `psycopg2.pool`
- `pymysql` â†’ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš” (`sqlalchemy`, `DBUtils` ë“±)

ì˜ˆì‹œ (PostgreSQL):

```
from psycopg2 import pool

pg_pool = pool.SimpleConnectionPool(1, 5, user="user", password="pass", host="localhost", dbname="db")
conn = pg_pool.getconn()
```

### âœ… ì£¼ìš” ì°¨ì´ ìš”ì•½

| í•­ëª©        | MySQL (`pymysql`)     | PostgreSQL (`psycopg2`)       |
| ----------- | --------------------- | ----------------------------- |
| ì„¤ì¹˜        | `pip install pymysql` | `pip install psycopg2-binary` |
| í¬íŠ¸        | 3306                  | 5432                          |
| ìë™ ID     | `AUTO_INCREMENT`      | `SERIAL`                      |
| ë¬¸ìì—´ íƒ€ì… | `VARCHAR`, `TEXT`     | `TEXT`, `VARCHAR(n)`          |
| íŠ¸ëœì­ì…˜    | ê¸°ë³¸ ìˆ˜ë™ commit      | ê¸°ë³¸ ìˆ˜ë™ commit              |
| íŒŒë¼ë¯¸í„°    | `%s` (ë¬¸ìì—´ ë™ì¼)    | `%s`                          |

### ğŸ“Œ ì˜ˆì™¸ ì²˜ë¦¬ ì˜ˆì‹œ

```
try:
    conn = psycopg2.connect(...)
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM table")
except psycopg2.Error as e:
    print("DB ì˜¤ë¥˜:", e)
finally:
    cursor.close()
    conn.close()
```

ì´ëŸ¬í•œ ë°©ì‹ì€ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œë„ ì‚¬ìš©ë˜ë©°,
ORM ì—°ê³„ (`SQLAlchemy`, `Django ORM`), íŠ¸ëœì­ì…˜ ì²˜ë¦¬, JOIN/INDEX íŠœë‹ ë“±ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë‹¤.

## ORM ì‚¬ìš©ë²• (`SQLAlchemy`)

### âœ… 1. ì„¤ì¹˜

```
pip install sqlalchemy
```

SQLite ì™¸ DB ì‚¬ìš© ì‹œ ë“œë¼ì´ë²„ë„ ì¶”ê°€ ì„¤ì¹˜ í•„ìš”:

- MySQL: `pip install pymysql`
- PostgreSQL: `pip install psycopg2-binary`

### ğŸ“¦ 2. ì£¼ìš” êµ¬ì„± ìš”ì†Œ

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª…                                    |
| --------- | --------------------------------------- |
| `Engine`  | DB ì—°ê²° ê´€ë¦¬ ê°ì²´                       |
| `Session` | ORMì˜ ë‹¨ìœ„ ì‘ì—… ê°ì²´ (íŠ¸ëœì­ì…˜ í¬í•¨)    |
| `Base`    | ëª¨ë“  ORM ëª¨ë¸ì˜ ë¶€ëª¨ í´ë˜ìŠ¤             |
| `Model`   | ì‹¤ì œ DB í…Œì´ë¸”ì— ë§¤í•‘ë˜ëŠ” Python í´ë˜ìŠ¤ |

### âš™ï¸ 3. ì—”ì§„ ë° ì„¸ì…˜ ì„¤ì •

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker, declarative_base

engine = create_engine("sqlite:///example.db", echo=True)
Session = sessionmaker(bind=engine)
session = Session()

Base = declarative_base()
```

- `sqlite:///example.db`: SQLite íŒŒì¼
- MySQL ì˜ˆì‹œ: `"mysql+pymysql://user:pass@localhost/dbname"`
- PostgreSQL ì˜ˆì‹œ: `"postgresql+psycopg2://user:pass@localhost/dbname"`

### ğŸ§± 4. ORM ëª¨ë¸ ì •ì˜

```
from sqlalchemy import Column, Integer, String

class User(Base):
    __tablename__ = "users"

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(50))
    age = Column(Integer)
```

- í´ë˜ìŠ¤ ì´ë¦„ì€ ê´€ë¡€ì ìœ¼ë¡œ ëŒ€ë¬¸ì
- `__tablename__`ì€ ì‹¤ì œ DBì˜ í…Œì´ë¸”ëª…
- `Column()`ì€ í•„ë“œ ì •ì˜

### ğŸ—ï¸ 5. í…Œì´ë¸” ìƒì„±

```
Base.metadata.create_all(engine)
```

- ëª¨ë“  ëª¨ë¸ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
- ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í…Œì´ë¸”ì€ ìƒëµë¨

### ğŸ“¥ 6. ë°ì´í„° ì‚½ì…

```
user = User(name="Alice", age=30)
session.add(user)
session.commit()
```

- `.add()`ë¡œ ë‹¨ê±´ ì¶”ê°€
- `.add_all([user1, user2])`ë¡œ ë‹¤ê±´ ì¶”ê°€ ê°€ëŠ¥

### ğŸ“¤ 7. ë°ì´í„° ì¡°íšŒ

```
users = session.query(User).all()             # ì „ì²´ ì¡°íšŒ
user = session.query(User).filter_by(name="Alice").first()  # ì¡°ê±´ ì¡°íšŒ
```

- `.filter(User.age > 25)`ì™€ ê°™ì€ í‘œí˜„ì‹ë„ ê°€ëŠ¥
- `.first()`ëŠ” ì²« ê²°ê³¼, `.one()`ì€ ì •í™•íˆ í•˜ë‚˜ë§Œ ìˆì„ ë•Œ ì‚¬ìš©

### âœï¸ 8. ë°ì´í„° ìˆ˜ì •

```
user = session.query(User).filter_by(name="Alice").first()
user.age = 35
session.commit()
```

### âŒ 9. ë°ì´í„° ì‚­ì œ

```
user = session.query(User).filter_by(name="Alice").first()
session.delete(user)
session.commit()
```

### ğŸ” 10. ê³ ê¸‰ í•„í„°ë§

```
session.query(User).filter(User.age >= 20, User.name.like("A%"))
```

- ì—¬ëŸ¬ ì¡°ê±´ì€ `,` ë˜ëŠ” `and_()`, `or_()` ì‚¬ìš©

### ğŸ“ 11. ê´€ê³„ ì„¤ì • (ForeignKey, relationship)

```
from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship

class Post(Base):
    __tablename__ = "posts"
    id = Column(Integer, primary_key=True)
    title = Column(String)
    user_id = Column(Integer, ForeignKey("users.id"))

    user = relationship("User", back_populates="posts")

User.posts = relationship("Post", back_populates="user", cascade="all, delete")
```

### ğŸ“Œ ìš”ì•½ í…Œì´ë¸”

| ê¸°ëŠ¥        | SQLAlchemy ORM ì˜ˆì‹œ                |
| ----------- | ---------------------------------- |
| ì—°ê²° ìƒì„±   | `create_engine()`                  |
| ì„¸ì…˜ ìƒì„±   | `sessionmaker()`                   |
| ëª¨ë¸ ì •ì˜   | í´ë˜ìŠ¤ + `__tablename__`, `Column` |
| í…Œì´ë¸” ìƒì„± | `Base.metadata.create_all()`       |
| ì‚½ì…        | `session.add()`                    |
| ì¡°íšŒ        | `session.query().filter()`         |
| ìˆ˜ì •        | ê°ì²´ ì†ì„± ìˆ˜ì • í›„ `commit()`       |
| ì‚­ì œ        | `session.delete()`                 |
| ê´€ê³„        | `ForeignKey`, `relationship()`     |

### ğŸ§  ORMì˜ ì¥ì 

- SQL ì—†ì´ë„ DB ì¡°ì‘ ê°€ëŠ¥ (Python ì½”ë“œë¡œ)
- ë°ì´í„°ë² ì´ìŠ¤ ì¢…ë¥˜ì™€ ë…ë¦½ì 
- ê°ì²´ì§€í–¥ ëª¨ë¸ë§ì´ ì‰¬ì›€
- ìœ ì§€ë³´ìˆ˜, í…ŒìŠ¤íŠ¸, ë§ˆì´ê·¸ë ˆì´ì…˜ì— ìœ ë¦¬

## íŠ¸ëœì­ì…˜, ì»¤ì„œ, ì—°ê²° ê°ì²´ ê´€ë¦¬

### âœ… 1. ì—°ê²° ê°ì²´ (`Connection`)

```
conn = sqlite3.connect("example.db")  # ë˜ëŠ” pymysql.connect(...), psycopg2.connect(...)
```

- DBì— ì ‘ì†ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©°, **SQL ì‹¤í–‰, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ì»¤ì„œ ìƒì„±**ì˜ ì¤‘ì‹¬
- `.commit()`, `.rollback()`, `.close()` ë©”ì„œë“œë¥¼ ì§€ì›í•¨

### âœ… 2. ì»¤ì„œ ê°ì²´ (`Cursor`)

```
cursor = conn.cursor()
cursor.execute("SELECT * FROM users")
rows = cursor.fetchall()
```

- SQLì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë‹¤ë£¨ëŠ” ì¸í„°í˜ì´ìŠ¤
- **í•˜ë‚˜ì˜ ì—°ê²° ê°ì²´ì—ì„œ ì—¬ëŸ¬ ì»¤ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ**
- SQL ì‹¤í–‰ í›„ ë°˜ë“œì‹œ `.close()` ë˜ëŠ” `with` ë¬¸ìœ¼ë¡œ ìì› ì •ë¦¬ í•„ìš”

### âœ… 3. íŠ¸ëœì­ì…˜ ì²˜ë¦¬

| ë°©ë²•              | ì„¤ëª…                                  |
| ----------------- | ------------------------------------- |
| `conn.commit()`   | ë³€ê²½ ì‚¬í•­ì„ í™•ì •                      |
| `conn.rollback()` | ì˜ˆì™¸ ë°œìƒ ì‹œ ë³µêµ¬                     |
| ìë™ ì»¤ë°‹         | SQLiteëŠ” ê¸°ë³¸ off, ì¼ë¶€ ë“œë¼ì´ë²„ëŠ” on |

#### ì˜ˆì‹œ:

```
try:
    conn = sqlite3.connect("example.db")
    cursor = conn.cursor()

    cursor.execute("INSERT INTO users (name) VALUES (?)", ("Alice",))
    conn.commit()
except Exception as e:
    conn.rollback()
    print("ì—ëŸ¬ ë°œìƒ:", e)
finally:
    cursor.close()
    conn.close()
```

### âœ… 4. `with` ë¬¸ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ìì› ê´€ë¦¬

Pythonì˜ `with` ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ì—°ê²° ê°ì²´ ë° ì»¤ì„œë¥¼ **ìë™ìœ¼ë¡œ ì •ë¦¬**í•  ìˆ˜ ìˆì–´ ìì› ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

#### SQLite ì˜ˆì‹œ:

```
import sqlite3

with sqlite3.connect("example.db") as conn:
    cursor = conn.cursor()
    cursor.execute("INSERT INTO users (name) VALUES (?)", ("Bob",))
    # with ë¸”ë¡ ì¢…ë£Œ ì‹œ ìë™ìœ¼ë¡œ commit ë˜ëŠ” rollback ìˆ˜í–‰
```

- `with` ë¸”ë¡ ë‚´ì—ì„œ **ì˜ˆì™¸ ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ rollback**
- `conn.__enter__()`ì™€ `__exit__()`ë¥¼ ì§€ì›í•˜ëŠ” DB ë“œë¼ì´ë²„ì—ì„œ ë™ì‘

### âœ… 5. ë‹¤ì¤‘ ì¿¼ë¦¬ ì‹¤í–‰ê³¼ `executemany()`

```
data = [("Alice",), ("Bob",)]
cursor.executemany("INSERT INTO users (name) VALUES (?)", data)
conn.commit()
```

### âœ… 6. ì£¼ì˜ì‚¬í•­ ìš”ì•½

| í•­ëª©           | ê¶Œì¥ ë°©ì‹                                       |
| -------------- | ----------------------------------------------- |
| ì»¤ì„œ ì •ë¦¬      | `.close()` ë˜ëŠ” `with conn:` ì‚¬ìš©               |
| íŠ¸ëœì­ì…˜       | ëª…ì‹œì  `commit()` or `rollback()`               |
| ì˜ˆì™¸ ì²˜ë¦¬      | ë°˜ë“œì‹œ `try-except-finally` ë˜ëŠ” `with` ë¬¸ ì‚¬ìš© |
| ì—°ê²° ì •ë¦¬      | `.close()` ë˜ëŠ” `with` ë¬¸ ì‚¬ìš©                  |
| ì¤‘ì²© ì—°ê²°/ì»¤ì„œ | ê°€ëŠ¥í•œ í”¼í•  ê²ƒ (ì„±ëŠ¥ ì €í•˜, ìì› ëˆ„ìˆ˜ ìš°ë ¤)      |

### ğŸ” `contextlib`ë¡œ ê³ ê¸‰ ê´€ë¦¬

```
from contextlib import contextmanager

@contextmanager
def get_cursor():
    conn = sqlite3.connect("example.db")
    cursor = conn.cursor()
    try:
        yield cursor
        conn.commit()
    except:
        conn.rollback()
        raise
    finally:
        cursor.close()
        conn.close()

with get_cursor() as cur:
    cur.execute("SELECT * FROM users")
```

### ğŸ§  íŠ¸ëœì­ì…˜ì€ ì–¸ì œ ì“°ë‚˜?

- ì—¬ëŸ¬ SQL ì‘ì—…ì´ **ëª¨ë‘ ì„±ê³µí•´ì•¼ë§Œ** ìœ íš¨í•œ ê²½ìš°
- ì¤‘ê°„ì— í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ **ì „ì²´ë¥¼ ì·¨ì†Œ**
- ì€í–‰ ì´ì²´, ì¬ê³  ê°±ì‹ , ì£¼ë¬¸ ì²˜ë¦¬ ë“±ì˜ í•µì‹¬ ì—°ì‚°ì— í•„ìˆ˜

### âœ… ì •ë¦¬

| ê°ì²´         | ì—­í•                                       |
| ------------ | ----------------------------------------- |
| `Connection` | ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²° ìœ ì§€, íŠ¸ëœì­ì…˜ ì œì–´ |
| `Cursor`     | SQL ì‹¤í–‰ ë° ê²°ê³¼ ì¡°íšŒ                     |
| `commit()`   | ë³€ê²½ ë‚´ìš© í™•ì •                            |
| `rollback()` | íŠ¸ëœì­ì…˜ ì·¨ì†Œ                             |
| `with` êµ¬ë¬¸  | ìì› ìë™ í•´ì œ ë° ì˜ˆì™¸ ì•ˆì „ì„± ë³´ì¥        |

íŠ¸ëœì­ì…˜, ì»¤ì„œ, ì—°ê²° ê´€ë¦¬ëŠ” ì‹¤ë¬´ ì½”ë“œì—ì„œ **ì˜¤ë¥˜ ë³µêµ¬ ê°€ëŠ¥ì„±, ì•ˆì •ì„±, ì„±ëŠ¥ì„ ì¢Œìš°í•˜ëŠ” í•µì‹¬ ê¸°ë°˜**ì´ë‹¤.