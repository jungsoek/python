# 6. ê³ ê¸‰ ë¬¸ë²• ë° ê¸°ëŠ¥

## ì´í„°ë ˆì´í„°ì™€ ì œë„ˆë ˆì´í„°

**ì´í„°ë ˆì´í„°(iterator)** ì™€ **ì œë„ˆë ˆì´í„°(generator)** ëŠ” Pythonì—ì„œ **ìˆœì°¨ì  ë°ì´í„° ì²˜ë¦¬**ë¥¼ ìœ„í•œ í•µì‹¬ ê°œë…ì´ë‹¤.
 ë‘˜ ë‹¤ **ë°˜ë³µ ê°€ëŠ¥í•œ ë°ì´í„° íë¦„ì„ í•œ ë²ˆì— í•˜ë‚˜ì”© ì²˜ë¦¬**í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”**í•˜ê³  **ì§€ì—° í‰ê°€(lazy evaluation)** ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.

### âœ… ì´í„°ë ˆì´í„°(Iterator)

ì´í„°ë ˆì´í„°ëŠ” ë‹¤ìŒ ë‘ ë©”ì„œë“œë¥¼ ê°€ì§„ ê°ì²´ë‹¤:

- `__iter__()` â†’ ì´í„°ë ˆì´í„° ê°ì²´ ìì²´ë¥¼ ë°˜í™˜
- `__next__()` â†’ ë‹¤ìŒ ê°’ì„ ë°˜í™˜í•˜ê³ , ëì— ë„ë‹¬í•˜ë©´ `StopIteration` ì˜ˆì™¸ ë°œìƒ

```
nums = [1, 2, 3]
it = iter(nums)           # ë¦¬ìŠ¤íŠ¸ë¥¼ ì´í„°ë ˆì´í„°ë¡œ ë³€í™˜

print(next(it))  # 1
print(next(it))  # 2
print(next(it))  # 3
print(next(it))  # StopIteration ë°œìƒ
```

### ğŸ§± ì‚¬ìš©ì ì •ì˜ ì´í„°ë ˆì´í„° ë§Œë“¤ê¸°

```
class Countdown:
    def __init__(self, start):
        self.current = start

    def __iter__(self):
        return self

    def __next__(self):
        if self.current <= 0:
            raise StopIteration
        self.current -= 1
        return self.current + 1

for num in Countdown(3):
    print(num)  # 3, 2, 1
```

### âš¡ ì œë„ˆë ˆì´í„°(Generator)

ì œë„ˆë ˆì´í„°ëŠ” **`yield` í‚¤ì›Œë“œ**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ì´í„°ë ˆì´í„°ë¥¼ ìë™ ìƒì„±**í•˜ëŠ” í•¨ìˆ˜ë‹¤.
 `yield`ëŠ” **ê°’ì„ ë°˜í™˜í•˜ê³  í•¨ìˆ˜ ìƒíƒœë¥¼ ì €ì¥**í•œ ì±„ ì¼ì‹œ ì¤‘ë‹¨(suspend)ë˜ë©°, ì´í›„ `next()`ë¡œ ë‹¤ì‹œ ì‹œì‘ë¨.

```
def countdown(n):
    while n > 0:
        yield n
        n -= 1

for i in countdown(3):
    print(i)  # 3, 2, 1
```

### ğŸ” `yield` vs `return`

| í‚¤ì›Œë“œ   | ê¸°ëŠ¥                                                   |
| -------- | ------------------------------------------------------ |
| `return` | ì¦‰ì‹œ í•¨ìˆ˜ ì¢…ë£Œ                                         |
| `yield`  | í˜„ì¬ ê°’ì„ ë‚´ë³´ë‚´ê³  í•¨ìˆ˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ (ìƒíƒœ ì €ì¥ë¨) |

```
def simple():
    yield 1
    yield 2
    yield 3

g = simple()
print(next(g))  # 1
print(next(g))  # 2
```

### ğŸ§ª ì‹¤ì „ ì˜ˆ: ë¬´í•œ í”¼ë³´ë‚˜ì¹˜ ì œë„ˆë ˆì´í„°

```
def fib():
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a + b

f = fib()
for _ in range(5):
    print(next(f))  # 0 1 1 2 3
```

### ğŸ§° ì œë„ˆë ˆì´í„° í‘œí˜„ì‹ (Generator Expression)

ë¦¬ìŠ¤íŠ¸ ë‚´í¬ì™€ ìœ ì‚¬í•˜ì§€ë§Œ `[]` ëŒ€ì‹  `()` ì‚¬ìš©:

```
gen = (x * x for x in range(5))
for v in gen:
    print(v)  # 0 1 4 9 16
```

### ğŸ“Š ì´í„°ë ˆì´í„° vs ì œë„ˆë ˆì´í„° ë¹„êµ

| í•­ëª©        | ì´í„°ë ˆì´í„°                       | ì œë„ˆë ˆì´í„°       |
| ----------- | -------------------------------- | ---------------- |
| ì •ì˜ ë°©ì‹   | `__iter__`, `__next__` ì§ì ‘ êµ¬í˜„ | `yield` ì‚¬ìš©     |
| ì½”ë“œëŸ‰      | ë³µì¡í•¨                           | ê°„ê²°í•¨           |
| ìƒíƒœ ì €ì¥   | ìˆ˜ë™ ê´€ë¦¬                        | ìë™ ìƒíƒœ ìœ ì§€   |
| ë°˜ë³µ ì‚¬ìš©   | ëª…ì‹œì  í´ë˜ìŠ¤ í•„ìš”               | í•¨ìˆ˜ í•˜ë‚˜ë¡œ ê°€ëŠ¥ |
| ë©”ëª¨ë¦¬ íš¨ìœ¨ | ë†’ìŒ                             | ë§¤ìš° ë†’ìŒ (lazy) |

### ğŸ¯ ìš”ì•½

| ê°œë…              | ì„¤ëª…                                |
| ----------------- | ----------------------------------- |
| `__iter__()`      | ì´í„°ë ˆì´í„° ê°ì²´ ë°˜í™˜                |
| `__next__()`      | ë‹¤ìŒ ê°’ ë°˜í™˜ (ì—†ìœ¼ë©´ StopIteration) |
| `yield`           | ê°’ì„ ë‚´ë³´ë‚´ê³  í•¨ìˆ˜ ìƒíƒœ ì €ì¥        |
| ì œë„ˆë ˆì´í„° í•¨ìˆ˜   | ì´í„°ë ˆì´í„°ë¥¼ ê°„í¸í•˜ê²Œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ |
| ì œë„ˆë ˆì´í„° í‘œí˜„ì‹ | `()` ë¡œ ì‘ì„±í•˜ëŠ” ê°„ë‹¨í•œ ì œë„ˆë ˆì´í„°  |

ì´í„°ë ˆì´í„°ì™€ ì œë„ˆë ˆì´í„°ëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬, ë¬´í•œ ë°˜ë³µ, ì§€ì—° ì‹¤í–‰ ë“±ì— í•„ìˆ˜ì ì´ë‹¤. Pythonicí•œ ë°˜ë³µ ì œì–´ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ ìµìˆ™í•´ì ¸ì•¼ í•  í•µì‹¬ ê¸°ìˆ ì´ë‹¤.

## ë°ì½”ë ˆì´í„° (`@decorator`)

**ë°ì½”ë ˆì´í„°(decorator)** ëŠ” **í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆëŠ” ë¬¸ë²•**ì´ë‹¤.
 `@` ë¬¸ë²•ìœ¼ë¡œ ê¸°ì¡´ ì½”ë“œë¥¼ **ë³€ê²½í•˜ì§€ ì•Šê³ ë„ ê·¸ ë™ì‘ì„ ê°ì‹¸ì„œ ì œì–´**í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, Pythonì—ì„œ ë§¤ìš° ê°•ë ¥í•˜ê³  í”íˆ ì‚¬ìš©ë˜ëŠ” ê³ ê¸‰ ë¬¸ë²•ì´ë‹¤.

### âœ… ê¸°ë³¸ ê°œë…

ë°ì½”ë ˆì´í„°ëŠ” **ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì•„ ìƒˆë¡œìš´ í•¨ìˆ˜ë¡œ ê°ì‹¸ëŠ” í•¨ìˆ˜**ë‹¤.

```
def decorator(func):
    def wrapper():
        print("í•¨ìˆ˜ ì‹¤í–‰ ì „")
        func()
        print("í•¨ìˆ˜ ì‹¤í–‰ í›„")
    return wrapper
```

ì ìš© ë°©ë²•:

```
@decorator
def say_hello():
    print("Hello")

say_hello()
```

ì¶œë ¥:

```
í•¨ìˆ˜ ì‹¤í–‰ ì „  
Hello  
í•¨ìˆ˜ ì‹¤í–‰ í›„
```

### âš™ï¸ ë°ì½”ë ˆì´í„°ëŠ” ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜?

ë‹¤ìŒ ë‘ ì½”ë“œëŠ” ì™„ì „íˆ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤:

```
@decorator
def my_func():
    ...

# ì™€ ë™ì¼:
my_func = decorator(my_func)
```

### ğŸ§¾ ì¸ì ìˆëŠ” í•¨ìˆ˜ì— ë°ì½”ë ˆì´í„° ì ìš©

```
def log(func):
    def wrapper(*args, **kwargs):
        print(f"{func.__name__} í˜¸ì¶œë¨")
        return func(*args, **kwargs)
    return wrapper

@log
def add(a, b):
    return a + b

print(add(2, 3))  # add í˜¸ì¶œë¨ â†’ 5
```

### ğŸ“Œ ì—¬ëŸ¬ ê°œì˜ ë°ì½”ë ˆì´í„° ì¤‘ì²© ì‚¬ìš©

```
@A
@B
def func():
    ...

# ì‹¤í–‰ ìˆœì„œ: func â†’ B(func) â†’ A(B(func))
```

### ğŸ§  `functools.wraps` ì‚¬ìš© (ë©”íƒ€ë°ì´í„° ìœ ì§€)

ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ë•Œ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„, docstring ë“±ì„ ìœ ì§€í•˜ë ¤ë©´ `functools.wraps`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```
from functools import wraps

def log(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"{func.__name__} í˜¸ì¶œ")
        return func(*args, **kwargs)
    return wrapper
```

### ğŸ§ª ì‹¤ì „ ì˜ˆ 1: ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë°ì½”ë ˆì´í„°

```
import time
from functools import wraps

def timer(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} ì‹¤í–‰ ì‹œê°„: {end - start:.4f}s")
        return result
    return wrapper

@timer
def slow():
    time.sleep(1)

slow()
```

### ğŸ§ª ì‹¤ì „ ì˜ˆ 2: ê¶Œí•œ ì²´í¬ ë°ì½”ë ˆì´í„°

```
def require_admin(func):
    @wraps(func)
    def wrapper(user, *args, **kwargs):
        if user != "admin":
            print("ì ‘ê·¼ ê±°ë¶€")
            return
        return func(user, *args, **kwargs)
    return wrapper

@require_admin
def view_secret(user):
    print("ë¹„ë°€ ë‚´ìš© ë³´ê¸°")

view_secret("guest")  # ì ‘ê·¼ ê±°ë¶€
view_secret("admin")  # ë¹„ë°€ ë‚´ìš© ë³´ê¸°
```

### ğŸ§¬ ë°ì½”ë ˆì´í„°ì— ì¸ì ì „ë‹¬í•˜ê¸°

```
def repeat(n):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            for _ in range(n):
                func(*args, **kwargs)
        return wrapper
    return decorator

@repeat(3)
def greet():
    print("ì•ˆë…•!")

greet()
# ì•ˆë…•! (3ë²ˆ ë°˜ë³µ)
```

### ğŸ¯ ìš”ì•½

| ìš”ì†Œ              | ì„¤ëª…                                    |
| ----------------- | --------------------------------------- |
| ë°ì½”ë ˆì´í„°        | í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì•„ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ |
| `@decorator`      | ë°ì½”ë ˆì´í„° ì ìš© ë¬¸ë²•                    |
| `*args, **kwargs` | ì¸ì ì „ë‹¬ ì¼ë°˜í™”                        |
| `@wraps(func)`    | ì›ë˜ í•¨ìˆ˜ ì •ë³´ ë³´ì¡´                     |
| ì‚¬ìš© ìš©ë„         | ë¡œê¹…, ì¸ì¦, íƒ€ì´ë¨¸, ìºì‹±, ì ‘ê·¼ ì œí•œ ë“±  |

ë°ì½”ë ˆì´í„°ëŠ” Pythonì˜ **í•¨ìˆ˜ ì¼ê¸‰ ê°ì²´(first-class function)** íŠ¹ì„±ì„ í™œìš©í•œ ê°•ë ¥í•œ íŒ¨í„´ì´ë‹¤.
 **ì½”ë“œ ìˆ˜ì • ì—†ì´ ë™ì‘ì„ í™•ì¥í•˜ê³  ë°˜ë³µì„ ì¤„ì´ëŠ” ê³ ê¸‰ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ìˆ˜ë‹¨**ìœ¼ë¡œ ë„ë¦¬ ì“°ì¸ë‹¤.

## ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì € (`with`, `__enter__`, `__exit__`)

**ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €(context manager)** ëŠ” ì½”ë“œ ë¸”ë¡ì˜ **ì§„ì…ê³¼ ì¢…ë£Œ ì‹œì ì— ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™”/ì •ë¦¬ ì‘ì—…ì„ ê´€ë¦¬**í•˜ëŠ” êµ¬ì¡°ë‹¤.
 `with` ë¬¸ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, ëŒ€í‘œì ìœ¼ë¡œ **íŒŒì¼ ì…ì¶œë ¥, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°, ë½(lock) ì²˜ë¦¬, ë¦¬ì†ŒìŠ¤ í•´ì œ** ë“±ì— ì‚¬ìš©ëœë‹¤.

### âœ… ê¸°ë³¸ ë¬¸ë²•

```
with ì»¨í…ìŠ¤íŠ¸ë§¤ë‹ˆì € as ë³€ìˆ˜:
    # ë¸”ë¡ ì‹¤í–‰
```

ë¸”ë¡ì„ ë²—ì–´ë‚˜ëŠ” ìˆœê°„ `__exit__()`ì´ ìë™ í˜¸ì¶œë˜ì–´ **ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ëœë‹¤.**

### ğŸ“ ì˜ˆì‹œ: íŒŒì¼ ì—´ê¸°

```
with open("test.txt", "r") as f:
    contents = f.read()
```

- `open()` í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ëŠ” ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €
- `__enter__()`ì—ì„œ íŒŒì¼ì„ ì—´ê³ , `__exit__()`ì—ì„œ ìë™ìœ¼ë¡œ ë‹«ëŠ”ë‹¤

### ğŸ”© ì‚¬ìš©ì ì •ì˜ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €

ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ ì§ì ‘ ë§Œë“¤ ìˆ˜ ìˆë‹¤:

| ë©”ì„œë“œ                                           | ì—­í•                                              |
| ------------------------------------------------ | ------------------------------------------------ |
| `__enter__(self)`                                | `with` ë¸”ë¡ ì§„ì… ì‹œ ì‹¤í–‰ë¨                       |
| `__exit__(self, exc_type, exc_value, traceback)` | ë¸”ë¡ ì¢…ë£Œ ì‹œ ì‹¤í–‰ë¨ (ì˜ˆì™¸ ë°œìƒ ì—¬ë¶€ë„ ì²˜ë¦¬ ê°€ëŠ¥) |

```
class Managed:
    def __enter__(self):
        print("ìì› ì—´ê¸°")
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print("ìì› ë‹«ê¸°")

with Managed():
    print("ì‘ì—… ì¤‘")
```

ì¶œë ¥:

```
ìì› ì—´ê¸°  
ì‘ì—… ì¤‘  
ìì› ë‹«ê¸°
```

### ğŸ§¯ ì˜ˆì™¸ ì²˜ë¦¬ë„ í¬í•¨ëœë‹¤

`__exit__()` ë©”ì„œë“œëŠ” ì˜ˆì™¸ê°€ ë°œìƒí–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì¸ìë¡œ ë°›ì•„ **ìë™ ì˜ˆì™¸ ì²˜ë¦¬**ë„ ê°€ëŠ¥í•˜ë‹¤.

```
class SafeOpen:
    def __enter__(self):
        print("íŒŒì¼ ì—´ê¸°")
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        if exc_type:
            print(f"ì˜ˆì™¸ ë°œìƒ: {exc_type.__name__}")
        print("íŒŒì¼ ë‹«ê¸°")
        return True  # ì˜ˆì™¸ ë¬´ì‹œ

with SafeOpen():
    print("ì‘ì—… ì‹œì‘")
    raise ValueError("ë¬¸ì œ ë°œìƒ")  # ì˜ˆì™¸ ë°œìƒí•´ë„ try-finallyì²˜ëŸ¼ ì²˜ë¦¬ë¨
    print("ì‘ì—… ë")
```

### ğŸ§ª ì‹¤ì „ ì˜ˆ: DB ì—°ê²° ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €

```
class DB:
    def __enter__(self):
        print("DB ì—°ê²°")
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print("DB ì—°ê²° í•´ì œ")

    def query(self):
        print("ì¿¼ë¦¬ ì‹¤í–‰")

with DB() as conn:
    conn.query()
```

### ğŸª„ `contextlib` ëª¨ë“ˆ í™œìš© â€“ ê°„ë‹¨í•œ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì € ì •ì˜

```
from contextlib import contextmanager

@contextmanager
def tag(name):
    print(f"<{name}>")
    yield
    print(f"</{name}>")

with tag("b"):
    print("êµµê²Œ í‘œì‹œ")
```

ì¶œë ¥:

```
<b>  
êµµê²Œ í‘œì‹œ  
</b>
```

### ğŸ¯ ìš”ì•½

| ìš”ì†Œ          | ì„¤ëª…                                        |
| ------------- | ------------------------------------------- |
| `with`        | ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì € ì§„ì…/ì¢…ë£Œ ì œì–´              |
| `__enter__()` | with ë¸”ë¡ ì‹œì‘ ì‹œ ì‹¤í–‰                      |
| `__exit__()`  | with ë¸”ë¡ ì¢…ë£Œ ì‹œ ì‹¤í–‰ (ì˜ˆì™¸ í¬í•¨)          |
| ìë™ ì •ë¦¬     | íŒŒì¼ ë‹«ê¸°, DB ì¢…ë£Œ, ë½ í•´ì œ ë“±ì— ì í•©       |
| `contextlib`  | ê°„ë‹¨í•œ ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €ë¥¼ í•¨ìˆ˜ì²˜ëŸ¼ ì •ì˜ ê°€ëŠ¥ |

ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €ëŠ” **ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜ ë°©ì§€**, **ì½”ë“œ ê°„ê²°í™”**, **ì˜ˆì™¸ ì•ˆì „ì„± í™•ë³´**ë¥¼ ìœ„í•œ ìµœê³ ì˜ ë„êµ¬ë‹¤.
 `with` ë¬¸ì€ Pythonicí•œ ì½”ë“œ ì‘ì„±ì˜ ëŒ€í‘œì  ì˜ˆì´ë©°, ê°ì²´ì˜ ì‚¬ìš©-í•´ì œë¥¼ ìë™ìœ¼ë¡œ ë¬¶ì–´ì¤€ë‹¤.

## í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ìš”ì†Œ

Pythonì€ ê°ì²´ì§€í–¥ ì–¸ì–´ì´ì§€ë§Œ, **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°(functional programming)** ìš”ì†Œë„ ê°•ë ¥í•˜ê²Œ ì§€ì›í•œë‹¤.
 í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ **ìˆœìˆ˜ í•¨ìˆ˜, ê³ ì°¨ í•¨ìˆ˜, ë¶ˆë³€ì„±, ì§€ì—° í‰ê°€** ë“±ì˜ ê°œë…ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, Pythonì€ ì´ë¥¼ **ì¼ê¸‰ í•¨ìˆ˜, ê³ ì°¨ í•¨ìˆ˜, map/filter/reduce, ëŒë‹¤ í•¨ìˆ˜, ì œë„ˆë ˆì´í„°, ë‚´ì¥ í•¨ìˆ˜** ë“±ì„ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

### âœ… 1. ì¼ê¸‰ ê°ì²´ (First-Class Function)

Pythonì—ì„œ í•¨ìˆ˜ëŠ” **ì¼ê¸‰ ê°ì²´**ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì´ ê°€ëŠ¥í•˜ë‹¤:

- ë³€ìˆ˜ì— í• ë‹¹
- í•¨ìˆ˜ ì¸ìë¡œ ì „ë‹¬
- í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©

```
def greet():
    return "Hello"

say = greet        # ë³€ìˆ˜ì— í• ë‹¹
print(say())       # Hello

def call(func):    # ì¸ìë¡œ ì „ë‹¬
    print(func())

def outer():
    def inner():
        return "Nested"
    return inner   # ë°˜í™˜ê°’ìœ¼ë¡œ í•¨ìˆ˜ ì‚¬ìš©

f = outer()
print(f())         # Nested
```

### ğŸ” 2. ê³ ì°¨ í•¨ìˆ˜ (Higher-Order Function)

**ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜**

- `map()`, `filter()`, `reduce()` ë“±ì´ ëŒ€í‘œì ì¸ ê³ ì°¨ í•¨ìˆ˜

```
def square(x): return x ** 2
print(list(map(square, [1, 2, 3])))  # [1, 4, 9]
```

### ğŸ§® 3. `map()`, `filter()`, `reduce()`

| í•¨ìˆ˜                     | ì„¤ëª…                       |
| ------------------------ | -------------------------- |
| `map(func, iterable)`    | ëª¨ë“  ìš”ì†Œì— í•¨ìˆ˜ ì ìš©      |
| `filter(func, iterable)` | ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìš”ì†Œë§Œ     |
| `reduce(func, iterable)` | ëˆ„ì  ê³„ì‚° (functools í•„ìš”) |

```
from functools import reduce

nums = [1, 2, 3, 4]

squares = list(map(lambda x: x**2, nums))         # [1, 4, 9, 16]
evens = list(filter(lambda x: x % 2 == 0, nums))  # [2, 4]
total = reduce(lambda x, y: x + y, nums)          # 10
```

### âš¡ 4. ìµëª… í•¨ìˆ˜: `lambda`

ê°„ë‹¨í•œ í•¨ìˆ˜ë¥¼ í•œ ì¤„ë¡œ ì •ì˜

```
add = lambda a, b: a + b
print(add(2, 3))  # 5
```

### ğŸ§­ 5. ìˆœìˆ˜ í•¨ìˆ˜ (Pure Function)

- ê°™ì€ ì¸ì â†’ í•­ìƒ ê°™ì€ ê²°ê³¼
- ì™¸ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ (side-effect ì—†ìŒ)

```
def add(a, b):
    return a + b
```

ìˆœìˆ˜ í•¨ìˆ˜ëŠ” **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**, **ì¬ì‚¬ìš©ì„±**, **ë³‘ë ¬ ì²˜ë¦¬ ì í•©ì„±** ë©´ì—ì„œ ìš°ìˆ˜

### ğŸ” 6. ë¶ˆë³€ ë°ì´í„° ì‚¬ìš© ê¶Œì¥ (Immutability)

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” **ë°ì´í„°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ë³µì‚¬**í•˜ëŠ” ë°©ì‹ ì„ í˜¸
- Pythonì€ `tuple`, `frozenset`, ë¬¸ìì—´ ë“±ì„ í†µí•´ ë¶ˆë³€ êµ¬ì¡° ì œê³µ

```
t = (1, 2, 3)
# t[0] = 10 â†’ ì˜¤ë¥˜ ë°œìƒ
```

### â³ 7. ì œë„ˆë ˆì´í„°ì™€ ì§€ì—° í‰ê°€ (Lazy Evaluation)

- `yield` ë˜ëŠ” ì œë„ˆë ˆì´í„° í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ë©´ **í•„ìš”í•  ë•Œë§Œ ê³„ì‚°**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì ˆì•½ ê°€ëŠ¥

```
gen = (x * x for x in range(10))
for v in gen:
    print(v)
```

### ğŸ§° 8. `functools` ëª¨ë“ˆ í™œìš©

- `partial()` â†’ ì¸ìë¥¼ ê³ ì •í•œ ìƒˆ í•¨ìˆ˜ ìƒì„±
- `lru_cache()` â†’ í•¨ìˆ˜ ê²°ê³¼ ìºì‹±
- `reduce()` â†’ ëˆ„ì  í•¨ìˆ˜ ì ìš©

```
from functools import partial, lru_cache

def power(base, exp): return base ** exp
square = partial(power, exp=2)
print(square(4))  # 16

@lru_cache(maxsize=None)
def fib(n):
    if n < 2: return n
    return fib(n-1) + fib(n-2)
```

### ğŸ¯ ìš”ì•½

| ìš”ì†Œ              | ì„¤ëª…                          |
| ----------------- | ----------------------------- |
| ì¼ê¸‰ í•¨ìˆ˜         | í•¨ìˆ˜ë¥¼ ê°’ì²˜ëŸ¼ ì‚¬ìš© ê°€ëŠ¥       |
| ê³ ì°¨ í•¨ìˆ˜         | í•¨ìˆ˜ê°€ í•¨ìˆ˜ë¥¼ ë°›ê±°ë‚˜ ë°˜í™˜     |
| map/filter/reduce | ì‹œí€€ìŠ¤ ê¸°ë°˜ í•¨ìˆ˜ ì²˜ë¦¬         |
| ëŒë‹¤              | ìµëª… í•¨ìˆ˜                     |
| ì œë„ˆë ˆì´í„°        | ì§€ì—° í‰ê°€ ë°˜ë³µì              |
| ìˆœìˆ˜ í•¨ìˆ˜         | ë¶€ì‘ìš© ì—†ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘  |
| ë¶ˆë³€ì„±            | ë°ì´í„° ë³€ê²½ ì—†ì´ ìƒˆ ê°ì²´ ìƒì„± |

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì€ Python ì½”ë“œì— **ì¶”ìƒí™”, ê°„ê²°ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**ì„ ë”í•´ì£¼ë©°, íŠ¹íˆ **ë°ì´í„° íë¦„ ì¤‘ì‹¬ ì„¤ê³„**ì— ë§¤ìš° ì í•©í•˜ë‹¤.
 í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼ì€ ê°ì²´ì§€í–¥ ìŠ¤íƒ€ì¼ê³¼ í•¨ê»˜ ì ì ˆíˆ ë³‘í–‰í•˜ë©° ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Pythonicí•œ ì ‘ê·¼ì´ë‹¤.

## íƒ€ì… íŒíŒ… (`typing` ëª¨ë“ˆ)

Pythonì€ **ë™ì  íƒ€ì´í•‘ ì–¸ì–´**ì§€ë§Œ, Python 3.5ë¶€í„° **ì •ì  ë¶„ì„ì„ ìœ„í•œ íƒ€ì… íŒíŒ…(type hinting)** ê¸°ëŠ¥ì„ ë„ì…í–ˆë‹¤.
 ì´ë¥¼ í†µí•´ **ì½”ë“œì˜ ê°€ë…ì„± í–¥ìƒ**, **IDE ìë™ì™„ì„±/ì •ì  ê²€ì‚¬ ì§€ì›**, **ëŒ€ê·œëª¨ ì‹œìŠ¤í…œì—ì„œì˜ ì•ˆì •ì„± í™•ë³´**ê°€ ê°€ëŠ¥í•˜ë‹¤.

### âœ… ê¸°ë³¸ ë¬¸ë²•

```
def add(x: int, y: int) -> int:
    return x + y
```

- `x: int` â†’ xëŠ” ì •ìˆ˜í˜•
- `-> int` â†’ ë°˜í™˜ê°’ì€ ì •ìˆ˜í˜•

Pythonì€ ì—¬ì „íˆ íƒ€ì…ì„ **ê²€ì‚¬í•˜ì§€ ì•ŠëŠ”ë‹¤**. ì´ëŠ” **ì •ì  ë¶„ì„ ë„êµ¬ (e.g., `mypy`, `pyright`)** ê°€ ê²€ì‚¬í•˜ëŠ” ê²ƒì´ë‹¤.

### ğŸ“¦ ì£¼ìš” ê¸°ë³¸ íƒ€ì… íŒíŠ¸

| íƒ€ì…                          | ì˜ë¯¸           |
| ----------------------------- | -------------- |
| `int`, `float`, `str`, `bool` | ê¸°ë³¸ ë‚´ì¥ íƒ€ì… |
| `list[int]`, `dict[str, int]` | ì»¬ë ‰ì…˜ íƒ€ì…    |
| `tuple[str, int]`             | íŠœí”Œ íƒ€ì…      |
| `set[str]`                    | ì§‘í•©           |
| `None`                        | ë°˜í™˜ê°’ ì—†ìŒ    |

```
def greet(name: str) -> None:
    print(f"Hello, {name}")
```

### ğŸ” ì»¬ë ‰ì…˜ íƒ€ì… (Python 3.9 ì´ìƒ)

```
def average(numbers: list[float]) -> float:
    return sum(numbers) / len(numbers)
```

Python 3.8 ì´í•˜ì—ì„œëŠ” `typing` ëª¨ë“ˆì˜ íƒ€ì…ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤:

```
from typing import List

def average(numbers: List[float]) -> float:
    ...
```

### ğŸ§± `typing` ëª¨ë“ˆ ì£¼ìš” êµ¬ì„±

| íƒ€ì…                       | ì„¤ëª…                 |
| -------------------------- | -------------------- |
| `List[T]`                  | ë¦¬ìŠ¤íŠ¸               |
| `Dict[K, V]`               | ë”•ì…”ë„ˆë¦¬             |
| `Tuple[T1, T2, ...]`       | íŠœí”Œ                 |
| `Set[T]`                   | ì§‘í•©                 |
| `Optional[T]`              | T ë˜ëŠ” None          |
| `Union[T1, T2]`            | ì—¬ëŸ¬ íƒ€ì… ì¤‘ í•˜ë‚˜    |
| `Any`                      | ì•„ë¬´ íƒ€ì… í—ˆìš©       |
| `Callable[[Args], Return]` | í•¨ìˆ˜ íƒ€ì… ì§€ì •       |
| `Literal[ê°’]`              | ë¦¬í„°ëŸ´ ê°’ ì œí•œ       |
| `TypedDict`                | íƒ€ì… ëª…ì‹œëœ ë”•ì…”ë„ˆë¦¬ |
| `TypeVar`                  | ì œë„¤ë¦­ íƒ€ì… ë§¤ê°œë³€ìˆ˜ |

### ğŸ” Optional, Union

```
from typing import Optional, Union

def get_name(id: int) -> Optional[str]:
    if id == 0:
        return None
    return "Alice"

def stringify(val: Union[int, float]) -> str:
    return str(val)
```

### ğŸ”§ Callable

```
from typing import Callable

def compute(op: Callable[[int, int], int], a: int, b: int) -> int:
    return op(a, b)
```

### ğŸ§¬ ì œë„¤ë¦­ íƒ€ì… (`TypeVar`)

```
from typing import TypeVar, List

T = TypeVar('T')

def get_first(lst: List[T]) -> T:
    return lst[0]
```

### ğŸ“˜ TypedDict â€“ êµ¬ì¡°í™”ëœ ë”•ì…”ë„ˆë¦¬ íƒ€ì… ì§€ì •

```
from typing import TypedDict

class User(TypedDict):
    name: str
    age: int

def print_user(user: User):
    print(user["name"], user["age"])
```

### ğŸ§  Literal

```
from typing import Literal

def move(direction: Literal["up", "down", "left", "right"]):
    print(f"Moving {direction}")
```

### âœ… í´ë˜ìŠ¤ì˜ íƒ€ì… íŒíŠ¸

```
class User:
    name: str
    age: int

    def __init__(self, name: str, age: int) -> None:
        self.name = name
        self.age = age
```

### ğŸ” ì‹¤ì „ ê²€ì‚¬ ë„êµ¬

- [`mypy`](https://mypy-lang.org/): ì •ì  íƒ€ì… ê²€ì‚¬ ë„êµ¬
- `pyright`: VSCodeì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹ ë¥¸ íƒ€ì… ê²€ì‚¬ê¸°
- `pylance`: Pyright ê¸°ë°˜ì˜ ìë™ì™„ì„±, ì˜¤ë¥˜ ê²€ì‚¬ í™•ì¥

```
mypy myfile.py
```

### ğŸ¯ ìš”ì•½

| ê¸°ëŠ¥          | ë¬¸ë²• ì˜ˆì‹œ                       |
| ------------- | ------------------------------- |
| ê¸°ë³¸ í•¨ìˆ˜     | `def f(x: int) -> int:`         |
| ë¦¬ìŠ¤íŠ¸        | `List[str]` ë˜ëŠ” `list[str]`    |
| Optional      | `Optional[str]` (str ë˜ëŠ” None) |
| Union         | `Union[int, float]`             |
| í•¨ìˆ˜ íƒ€ì…     | `Callable[[int, int], int]`     |
| ì œë„¤ë¦­        | `TypeVar`, `List[T]`            |
| êµ¬ì¡° ë”•ì…”ë„ˆë¦¬ | `TypedDict`                     |

íƒ€ì… íŒíŒ…ì€ Python ì½”ë“œì˜ **ëª…í™•ì„±, ìë™ì™„ì„±, ìœ ì§€ë³´ìˆ˜ì„±**ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ë©°,
 ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ë‚˜ í˜‘ì—… ì‹œì—ëŠ” **ì‚¬ì‹¤ìƒ í•„ìˆ˜ ìˆ˜ì¤€ì˜ ê°œë°œ í‘œì¤€**ìœ¼ë¡œ ê°„ì£¼ëœë‹¤.

## Duck Typing ë° ë‹¤í˜•ì„±

Pythonì€ **ë™ì  íƒ€ì´í•‘(dynamic typing)** ì–¸ì–´ì´ë©°, **ì •ì  íƒ€ì… ê¸°ë°˜ ì–¸ì–´**ë“¤ê³¼ëŠ” ë‹¬ë¦¬ ê°ì²´ì˜ "íƒ€ì…ì´ ë¬´ì—‡ì¸ì§€" ë³´ë‹¤ **"ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€"** ì— ì´ˆì ì„ ë§ì¶˜ë‹¤.
 ì´ëŸ° ì² í•™ì˜ ëŒ€í‘œì ì¸ ê°œë…ì´ **ë• íƒ€ì´í•‘(Duck Typing)** ì´ë©°, ì´ëŠ” **ë‹¤í˜•ì„±(polymorphism)** ì˜ í•µì‹¬ì ì¸ êµ¬í˜„ ë°©ì‹ ì¤‘ í•˜ë‚˜ë‹¤.

### âœ… Duck Typing ì´ë€?

> "If it looks like a duck, swims like a duck, and quacks like a duck, then it probably **is** a duck."

Pythonì—ì„œëŠ” **ê°ì²´ê°€ íŠ¹ì • ë©”ì„œë“œë‚˜ ì†ì„±ì„ ê°€ì§€ê³  ìˆë‹¤ë©´** ê·¸ê²ƒì„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤ê³  íŒë‹¨í•˜ë©°,
 **ê°ì²´ì˜ ì‹¤ì œ íƒ€ì…ì´ ì•„ë‹ˆë¼ í–‰ë™ì— ë”°ë¼ ë™ì‘ì´ ê²°ì •**ëœë‹¤.

```
class Duck:
    def quack(self):
        print("ê½¥ê½¥")

class Person:
    def quack(self):
        print("ì‚¬ëŒì´ ë•ì²˜ëŸ¼ ê½¥ê½¥!")

def make_it_quack(animal):
    animal.quack()  # ê°ì²´ì˜ íƒ€ì…ì´ ì•„ë‹Œ ë©”ì„œë“œ ìœ ë¬´ì— ë”°ë¼ ì‹¤í–‰

make_it_quack(Duck())    # ê½¥ê½¥
make_it_quack(Person())  # ì‚¬ëŒì´ ë•ì²˜ëŸ¼ ê½¥ê½¥!
```

- `animal`ì˜ íƒ€ì…ì€ Duckì´ ì•„ë‹ˆì–´ë„ ìƒê´€ ì—†ìŒ â†’ **duck typing ê¸°ë°˜ ë‹¤í˜•ì„±**

### ğŸ§  Duck Typingì˜ í•µì‹¬ íŠ¹ì§•

| íŠ¹ì§•                    | ì„¤ëª…                                    |
| ----------------------- | --------------------------------------- |
| ë™ì  íƒ€ì… í™•ì¸          | íƒ€ì… ì²´í¬ ì—†ì´, ë©”ì„œë“œ ì¡´ì¬ ì—¬ë¶€ë¡œ íŒë‹¨ |
| ì¸í„°í˜ì´ìŠ¤ ê°•ì œ ì—†ìŒ    | `interface` ì„ ì–¸ í•„ìš” ì—†ìŒ              |
| ì—ëŸ¬ëŠ” ì‹¤í–‰ ì‹œì ì— ë°œìƒ | ì‚¬ì „ ì»´íŒŒì¼ ê²€ì‚¬ ì—†ìŒ                   |

### ğŸ§¬ Duck Typingê³¼ ë‹¤í˜•ì„± (Polymorphism)

**ë‹¤í˜•ì„±(polymorphism)** ì€ "ê°™ì€ ì´ë¦„ì˜ í•¨ìˆ˜ë‚˜ ë©”ì„œë“œê°€ ë‹¤ì–‘í•œ ê°ì²´ì—ì„œ ë‹¤ë¥´ê²Œ ë™ì‘"í•˜ëŠ” íŠ¹ì„±ì´ë‹¤.
 Pythonì—ì„œëŠ” ë• íƒ€ì´í•‘ìœ¼ë¡œ ì¸í•´ **ëª…ì‹œì ì¸ ìƒì† ì—†ì´ë„ ë‹¤í˜•ì„±ì´ ê°€ëŠ¥**í•˜ë‹¤.

```
class File:
    def read(self):
        return "íŒŒì¼ ì½ê¸°"

class Socket:
    def read(self):
        return "ì†Œì¼“ ë°ì´í„° ìˆ˜ì‹ "

def read_data(source):
    print(source.read())

read_data(File())    # íŒŒì¼ ì½ê¸°
read_data(Socket())  # ì†Œì¼“ ë°ì´í„° ìˆ˜ì‹ 
```

- `read()`ë§Œ êµ¬í˜„ë˜ì–´ ìˆë‹¤ë©´, **íƒ€ì… ìƒì†ê³¼ ë¬´ê´€í•˜ê²Œ** `read_data()`ì—ì„œ ë‹¤í˜•ì  ë™ì‘ ê°€ëŠ¥

### ğŸ” íƒ€ì… ì²´í¬ ì—†ì´ë„ ì¸í„°í˜ì´ìŠ¤ ë§Œì¡±

```
def length_of(obj):
    return len(obj)  # str, list, dict ë“± ë‹¤ì–‘í•œ íƒ€ì…ì— ì ìš© ê°€ëŠ¥

print(length_of("hello"))  # 5
print(length_of([1, 2, 3]))  # 3
print(length_of({"a": 1}))  # 1
```

- `len()`ì´ ë™ì‘í•˜ëŠ” ê°ì²´ë¼ë©´ ëª¨ë‘ í—ˆìš©ë¨
- Pythonì€ ì´ëŸ° **í–‰ë™ ì¤‘ì‹¬ì˜ íƒ€ì… ì‹œìŠ¤í…œ**ì„ í†µí•´ ìì—°ìŠ¤ëŸ¬ìš´ ë‹¤í˜•ì„±ì„ ì‹¤í˜„í•¨

### ğŸ” íƒ€ì… ê²€ì‚¬ ëŒ€ì‹  EAFP ìŠ¤íƒ€ì¼

Pythonì—ì„œëŠ” **EAFP (Easier to Ask Forgiveness than Permission)** ìŠ¤íƒ€ì¼ì´ ì„ í˜¸ë¨

```
def call_quack(obj):
    try:
        obj.quack()
    except AttributeError:
        print("quack() ë©”ì„œë“œê°€ ì—†ìŠµë‹ˆë‹¤.")
```

- ì‚¬ì „ì— íƒ€ì…ì„ í™•ì¸í•˜ëŠ” **LBYL (Look Before You Leap)** ëŒ€ì‹ ,
- ê·¸ëƒ¥ ì‹¤í–‰í•˜ê³  ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ â†’ **ìœ ì—°í•˜ê³  ê°„ê²°í•œ ì½”ë“œ ìŠ¤íƒ€ì¼**

### ğŸ§ª ì‹¤ì „ ì˜ˆ: `for` ë¬¸ê³¼ ë• íƒ€ì´í•‘

```
def total(values):
    result = 0
    for v in values:  # iterable ê°ì²´ë¼ë©´ ëª¨ë‘ í—ˆìš©
        result += v
    return result

print(total([1, 2, 3]))  # 6
print(total((4, 5, 6)))  # 15
print(total(x for x in range(3)))  # 3
```

- ë¦¬ìŠ¤íŠ¸, íŠœí”Œ, ì œë„ˆë ˆì´í„° ë“± `__iter__()`ë§Œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©´ OK

### ğŸ§¯ ì£¼ì˜ì 

- ë• íƒ€ì´í•‘ì€ **ìœ ì—°í•˜ì§€ë§Œ ì‹¤ìˆ˜ì— ì·¨ì•½**
- **ì •ì  íƒ€ì… ê²€ì‚¬**ë¥¼ ê°•í™”í•˜ë ¤ë©´ `typing.Protocol` ë˜ëŠ” íƒ€ì… íŒíŠ¸ + `mypy` ì¡°í•©ì„ ì‚¬ìš©í•˜ë©´ ì•ˆì •ì„± í™•ë³´ ê°€ëŠ¥

```
from typing import Protocol

class Quackable(Protocol):
    def quack(self) -> None: ...

def make_noise(duck: Quackable):
    duck.quack()
```

### ğŸ¯ ìš”ì•½

| ê°œë…           | ì„¤ëª…                                    |
| -------------- | --------------------------------------- |
| ë• íƒ€ì´í•‘      | ê°ì²´ì˜ í–‰ë™(ë©”ì„œë“œ/ì†ì„±)ìœ¼ë¡œ íƒ€ì… íŒë‹¨  |
| ë‹¤í˜•ì„±         | ë™ì¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ë‹¤ì–‘í•œ ê°ì²´ ì§€ì›      |
| ìƒì† í•„ìš” ì—†ìŒ | duck typingìœ¼ë¡œ í–‰ë™ì´ ê°™ìœ¼ë©´ ì‚¬ìš© ê°€ëŠ¥ |
| ìœ ì—°ì„±         | íƒ€ì…ë³´ë‹¤ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„ì— ì í•©    |
| ë¦¬ìŠ¤í¬         | ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜ ê°€ëŠ¥ì„± ìˆìŒ              |

Pythonì˜ ë• íƒ€ì´í•‘ê³¼ ë‹¤í˜•ì„±ì€ ë§¤ìš° **ìì—°ìŠ¤ëŸ½ê³  ê°•ë ¥í•œ ì¶”ìƒí™” ë„êµ¬**ë¡œ,
 ì •í˜•í™”ëœ ì¸í„°í˜ì´ìŠ¤ ì—†ì´ë„ **ë‹¤ì–‘í•œ ê°ì²´ë¥¼ ìœ ì—°í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„**ì„ ì‹¤í˜„í•´ì¤€ë‹¤.

## ì¶”ìƒ í´ë˜ìŠ¤ (`abc` ëª¨ë“ˆ)

**ì¶”ìƒ í´ë˜ìŠ¤(Abstract Class)** ëŠ” **ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ê³ **, **ìƒì†ë°›ì€ ìì‹ í´ë˜ìŠ¤ê°€ ë°˜ë“œì‹œ íŠ¹ì • ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë„ë¡ ê°•ì œí•˜ëŠ” í´ë˜ìŠ¤**ë‹¤.
 Pythonì—ì„œëŠ” `abc` (Abstract Base Class) ëª¨ë“ˆì„ í†µí•´ ì¶”ìƒ í´ë˜ìŠ¤ì™€ **ì¶”ìƒ ë©”ì„œë“œ**ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

ì´ëŠ” **ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„**, **ì½”ë“œ ì¼ê´€ì„± ìœ ì§€**, **ë‹¤í˜•ì„± êµ¬í˜„ì˜ ê¸°ë°˜**ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

### âœ… ê¸°ë³¸ êµ¬ì¡°

```
from abc import ABC, abstractmethod

class MyBase(ABC):
    @abstractmethod
    def must_implement(self):
        pass
```

- `ABC` í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë©´ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ê°„ì£¼ë¨
- `@abstractmethod` ê°€ ë¶™ì€ ë©”ì„œë“œëŠ” **ë°˜ë“œì‹œ ìì‹ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•´ì•¼ í•¨**

### ğŸ§© ì¶”ìƒ í´ë˜ìŠ¤ ì˜ˆì‹œ

```
from abc import ABC, abstractmethod

class Shape(ABC):
    @abstractmethod
    def area(self) -> float:
        pass

class Circle(Shape):
    def __init__(self, r):
        self.r = r

    def area(self) -> float:
        return 3.14 * self.r ** 2
pythonì½”ë“œ ë³µì‚¬s = Circle(5)
print(s.area())  # 78.5
```

- `Shape()` ìì²´ëŠ” ì¸ìŠ¤í„´ìŠ¤í™” ë¶ˆê°€ëŠ¥
- `Circle`ì´ `area()`ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šìœ¼ë©´ `TypeError` ë°œìƒ

### ğŸ” ì¸ìŠ¤í„´ìŠ¤í™” ë°©ì§€

```
s = Shape()  # TypeError: Can't instantiate abstract class Shape
```

### ğŸ§ª ì¶”ìƒ í´ë˜ìŠ¤ì˜ ì‹¤ì „ í™œìš©

#### ì˜ˆ: ê²°ì œ ì²˜ë¦¬ ì‹œìŠ¤í…œ

```
class PaymentProcessor(ABC):
    @abstractmethod
    def pay(self, amount: float):
        pass

class CreditCard(PaymentProcessor):
    def pay(self, amount: float):
        print(f"ì‹ ìš©ì¹´ë“œë¡œ {amount}ì› ê²°ì œ ì™„ë£Œ")

class Bitcoin(PaymentProcessor):
    def pay(self, amount: float):
        print(f"ë¹„íŠ¸ì½”ì¸ìœ¼ë¡œ {amount}ì› ê²°ì œ ì™„ë£Œ")

def process_payment(method: PaymentProcessor, amount: float):
    method.pay(amount)

process_payment(Bitcoin(), 100000)
process_payment(CreditCard(), 20000)
```

- ë‹¤ì–‘í•œ ë°©ì‹ì˜ ê²°ì œ í´ë˜ìŠ¤ë¥¼ ê°™ì€ `PaymentProcessor` íƒ€ì…ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆìŒ
- ì´ ë°©ì‹ì€ **ë‹¤í˜•ì„±(polymorphism)** ì„ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¡°í™”í•œ ì˜ˆ

### ğŸ§° ì¶”ìƒ ì†ì„± (`@property`ì™€ í•¨ê»˜ ì‚¬ìš©)

```
class Animal(ABC):
    @property
    @abstractmethod
    def sound(self):
        pass

class Dog(Animal):
    @property
    def sound(self):
        return "ë©ë©"
```

### ğŸ§± ë‹¤ì¤‘ ìƒì† ê°€ëŠ¥

Pythonì˜ ì¶”ìƒ í´ë˜ìŠ¤ëŠ” **ë‹¤ì¤‘ ìƒì†**ê³¼ë„ í˜¸í™˜ë˜ë©°, **ì¸í„°í˜ì´ìŠ¤ ì—­í• **ì„ í•˜ëŠ” ì—¬ëŸ¬ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ì¡°í•©í•  ìˆ˜ ìˆë‹¤.

### ğŸ“‹ ìš”ì•½ í‘œ

| ìš”ì†Œ                | ì„¤ëª…                                                         |
| ------------------- | ------------------------------------------------------------ |
| `ABC`               | ì¶”ìƒ í´ë˜ìŠ¤ì˜ ê¸°ë°˜ í´ë˜ìŠ¤                                    |
| `@abstractmethod`   | ìì‹ í´ë˜ìŠ¤ê°€ ë°˜ë“œì‹œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œ                    |
| `@abstractproperty` | ì¶”ìƒ ì†ì„± ì •ì˜ (Python 3.3 ì´ìƒì€ `@property` + `@abstractmethod` ì¡°í•© ì‚¬ìš©) |
| ì¸ìŠ¤í„´ìŠ¤í™”          | ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¶ˆê°€ëŠ¥                                    |
| ì‚¬ìš© ëª©ì            | ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ê°•ì œ, ë‹¤í˜•ì„± ê¸°ë°˜ ì„¤ê³„                       |

### ğŸ¯ ì¶”ìƒ í´ë˜ìŠ¤ vs ë• íƒ€ì´í•‘

| í•­ëª©        | ì¶”ìƒ í´ë˜ìŠ¤                        | ë• íƒ€ì´í•‘                 |
| ----------- | ---------------------------------- | ------------------------- |
| ëª…ì‹œì  ì„ ì–¸ | O                                  | X                         |
| ê°•ì œì„±      | ê°•í•¨ (`TypeError`)                 | ì—†ìŒ                      |
| ì‚¬ìš© ì‹œì    | ì •ì  ë¶„ì„, íŒ€ í˜‘ì—…, ì•ˆì •ì„± ì¤‘ìš” ì‹œ | ìœ ì—°í•œ êµ¬ì¡°, ë¹ ë¥¸ ê°œë°œ ì‹œ |
| ë„êµ¬ ì§€ì›   | `abc`, `mypy`, `pyright` ë“±        | ì—†ìŒ (ëŸ°íƒ€ì„ ì˜ˆì™¸ ì²˜ë¦¬)   |

ì¶”ìƒ í´ë˜ìŠ¤ëŠ” Pythonì—ì„œ **ì—„ê²©í•œ ì„¤ê³„ì™€ í˜‘ì—… ì‹œ ê³„ì•½ì„ ëª…í™•íˆ í•˜ë ¤ëŠ” ëª©ì **ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°,
 íŠ¹íˆ **ë‹¤í˜•ì„± ê¸°ë°˜ ì‹œìŠ¤í…œ ì„¤ê³„**, **ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œ**, **ì¸í„°í˜ì´ìŠ¤ í”„ë¡œê·¸ë˜ë°** ì‹œ í•„ìˆ˜ì ì¸ ë„êµ¬ë‹¤.